# -*- coding: utf-8 -*-

from urllib.request import urlretrieve

import json

from bs4 import BeautifulSoup
from selenium import webdriver
from selenium.webdriver.common.by import By

json_data = '{"@context":"https://schema.org","@type":"ItemList","itemListElement":[{"@type":"ListItem","item":{"@type":"Product","name":"1위 마녀공장 | 퓨어 클렌징 워터 센서티브","image":"https://dn5hzapyfrpio.cloudfront.net/product/026/026d3b90-dcf7-11ee-9627-7f80bf24c2ee.jpeg","url":"https://www.glowpick.com/products/171501","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.66","reviewCount":678}},"position":1},{"@type":"ListItem","item":{"@type":"Product","name":"2위 비오엠 | 에잇 티 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/164/164823e0-1480-11ee-a064-8f0bbb530807.jpeg","url":"https://www.glowpick.com/products/109158","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.64","reviewCount":393}},"position":2},{"@type":"ListItem","item":{"@type":"Product","name":"3위 니들리 | 마일드 미셀라 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/946/946260d0-8a1e-11ec-886f-21278cddeda6.jpeg","url":"https://www.glowpick.com/products/154630","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.61","reviewCount":207}},"position":3},{"@type":"ListItem","item":{"@type":"Product","name":"4위 아임유니 | 마일드 클렌징 워터 이엑스","image":"https://dn5hzapyfrpio.cloudfront.net/product/7c2/7c238d00-c340-11eb-8151-49b6f865b560.jpeg","url":"https://www.glowpick.com/products/126068","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.61","reviewCount":88}},"position":4},{"@type":"ListItem","item":{"@type":"Product","name":"5위 더샘 | 힐링 티 가든 티트리 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/d8d/d8dfea60-a04a-11ec-bb5e-f96d59d299e4.jpeg","url":"https://www.glowpick.com/products/21385","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.39","reviewCount":5465}},"position":5},{"@type":"ListItem","item":{"@type":"Product","name":"6위 로벡틴 | 클린 마린 미셀라 딥 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/eb0/eb0ca8f0-53ba-11eb-9f9d-4ffd996d83ea.jpeg","url":"https://www.glowpick.com/products/143388","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.47","reviewCount":86}},"position":6},{"@type":"ListItem","item":{"@type":"Product","name":"7위 라로슈포제 | 미셀라 클렌징워터 울트라 센시티브","image":"https://dn5hzapyfrpio.cloudfront.net/product/3f0/3f03ac20-6797-11eb-b591-07414105add5.png","url":"https://www.glowpick.com/products/88499","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.36","reviewCount":748}},"position":7},{"@type":"ListItem","item":{"@type":"Product","name":"8위 유리아쥬 | 미셀라 클렌징 워터 센서티브","image":"https://dn5hzapyfrpio.cloudfront.net/product/513/513b0f30-04a6-11ec-abe7-596b71ed79c1.jpeg","url":"https://www.glowpick.com/products/125091","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.44","reviewCount":101}},"position":8},{"@type":"ListItem","item":{"@type":"Product","name":"9위 더샘 | 힐링 티 가든 그린티 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/5d5/5d5418e0-da64-11ec-b462-a987197280d6.jpeg","url":"https://www.glowpick.com/products/12609","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.34","reviewCount":6641}},"position":9},{"@type":"ListItem","item":{"@type":"Product","name":"10위 바이오더마 | 센시비오 H2O","image":"https://dn5hzapyfrpio.cloudfront.net/product/42a/42ac1720-da61-11ec-9e20-e3779f83d594.jpeg","url":"https://www.glowpick.com/products/957","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.30","reviewCount":5042}},"position":10},{"@type":"ListItem","item":{"@type":"Product","name":"11위 가르니에 | 미셀라 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/home/glowmee/upload/20160222/1456109347785.jpg","url":"https://www.glowpick.com/products/66001","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.35","reviewCount":350}},"position":11},{"@type":"ListItem","item":{"@type":"Product","name":"12위 바이오더마 | 하이드라비오 H20","image":"https://dn5hzapyfrpio.cloudfront.net/product/fc4/fc4f7160-e9fb-11eb-ae81-9f90f1e03ef5.jpeg","url":"https://www.glowpick.com/products/18290","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.29","reviewCount":728}},"position":12},{"@type":"ListItem","item":{"@type":"Product","name":"13위 셀퓨전씨 | 약산성 패리어 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/ed9/ed9b63a0-f65c-11eb-ac38-adbd80e2789c.jpeg","url":"https://www.glowpick.com/products/149711","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.29","reviewCount":146}},"position":13},{"@type":"ListItem","item":{"@type":"Product","name":"14위 브라운랩 | 애시드 밸런스 페이셜 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/605/60581f20-0e16-11ec-a57c-ef2ca6862863.jpeg","url":"https://www.glowpick.com/products/122325","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.29","reviewCount":82}},"position":14},{"@type":"ListItem","item":{"@type":"Product","name":"15위 코스알엑스 | 약산성 나이아신아마이드 미셀라 클렌징 워터 ","image":"https://dn5hzapyfrpio.cloudfront.net/product/f24/f24c83c0-0c03-11ee-a4f8-ef1561aee92e.jpeg","url":"https://www.glowpick.com/products/166015","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.54","reviewCount":57}},"position":15},{"@type":"ListItem","item":{"@type":"Product","name":"16위 라운드랩 | 1025 독도 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/47e/47e68d80-7851-11ee-b842-db65e1eeb438.jpeg","url":"https://www.glowpick.com/products/127287","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.27","reviewCount":301}},"position":16},{"@type":"ListItem","item":{"@type":"Product","name":"17위 히야 | 마일드 벗 딥 클렌징 워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/657/657426b0-0673-11ed-b6ea-232d81500708.png","url":"https://www.glowpick.com/products/127262","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.68","reviewCount":53}},"position":17},{"@type":"ListItem","item":{"@type":"Product","name":"18위 비페스타 | 클렌징 워터 [브라이트닝]","image":"https://dn5hzapyfrpio.cloudfront.net/home/glowmee/upload/product/20201110/1604991745389.jpg","url":"https://www.glowpick.com/products/1718","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.18","reviewCount":1311}},"position":18},{"@type":"ListItem","item":{"@type":"Product","name":"19위 발레아 | 미셀라 클렌징 워터 포 드라이 스킨","image":"https://dn5hzapyfrpio.cloudfront.net/home/glowmee/upload/20190822/1566451995140.jpg","url":"https://www.glowpick.com/products/124794","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.19","reviewCount":91}},"position":19},{"@type":"ListItem","item":{"@type":"Product","name":"20위 뷰티레시피 | 리틀 머메이드 디스 이즈 프린세스 클렌징워터","image":"https://dn5hzapyfrpio.cloudfront.net/product/e9d/e9d2ba90-12f2-11ec-a1f1-af70ca25143d.jpeg","url":"https://www.glowpick.com/products/46369","aggregateRating":{"@type":"AggregateRating","ratingValue":"4.31","reviewCount":175}},"position":20}]}'
data = json.loads(json_data)

img_folder = 'C:/dev/dev_pro/image_repo'

for i in range(20):
    img_url = data["itemListElement"][i]["item"]["image"]
    name = data["itemListElement"][i]["item"]["name"]

    num = name.find("|")

    print(img_url)
    print('['+name[num+2:]+']')
    product = name[num+2:]

    urlretrieve(img_url, f'C:/dev/dev_pro/image_repo/{product}.jpg')

# driver = webdriver.Chrome()
# driver.implicitly_wait(2)
# driver.get(url)
# time.sleep(2)
# soup = BeautifulSoup(driver.page_source, 'html.parser')
# div = soup.select_one('.product__image-wrapper')
# img = div.select_one('.image__img')
# # print(img)
# url = img.get_attribute_list('src')
# div2 = soup.select_one('.product__summary')
# name = div2.select_one('.product__summary__name').text
# print(url[0], '['+name.strip()+']')